@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Playfair+Display:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Cocogoose Font Face Declarations - Using cleaner variants */

/* Primary font - Clean Semilight Italic for main text */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Semilight-Italic-trial.ttf') format('truetype');
  font-weight: 300;
  font-style: italic;
  font-display: swap;
}

/* Regular weight - Clean Regular instead of Letterpress */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Regular-trial.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* Light weight - Clean version */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Light-trial.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

/* Ultralight weight */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Ultralight-trial.ttf') format('truetype');
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}

/* Bold weight */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Bold-trial.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Semilight regular (non-italic) */
@font-face {
  font-family: 'Cocogoose';
  src: url('/fonts/Cocogoose-Pro-Semilight-trial.ttf') format('truetype');
  font-weight: 350;
  font-style: normal;
  font-display: swap;
}

/* Keep letterpress as a special decorative variant */
@font-face {
  font-family: 'CocogooseLetterpress';
  src: url('/fonts/Cocogoose-Pro-Letterpress-Regular-trial.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

.mb-8 {
    margin-top: 2rem;
}
/* Reigh App Styles */
@layer base {
  :root {
    /* ========================================= */
    /* CENTRALIZED THEME DEFINITIONS */
    /* ========================================= */
    
    /* La La Land Theme Colors */
    --theme-lala-primary: 254 61% 48%;        /* #312680 - Royal Purple */
    --theme-lala-primary-dark: 254 70% 35%;   /* Darker Royal Purple */
    --theme-lala-primary-light: 254 55% 55%;  /* Lighter Royal Purple */
    --theme-lala-secondary: 217 33% 63%;      /* #788FB4 - Light Blue */
    --theme-lala-secondary-dark: 217 25% 45%; /* Darker Light Blue */
    --theme-lala-secondary-light: 217 40% 75%; /* Lighter Light Blue */
    --theme-lala-accent: 45 58% 67%;          /* #DABF77 - Golden Yellow */
    --theme-lala-accent-dark: 45 50% 55%;     /* Darker Golden */
    --theme-lala-accent-light: 45 65% 75%;    /* Lighter Golden */
    --theme-lala-neutral: 242 78% 32%;        /* #151551 - Deep Navy */
    --theme-lala-neutral-light: 242 70% 40%;  /* Lighter Navy */
    --theme-lala-surface: 45 40% 95%;         /* Cream */
    --theme-lala-surface-bright: 0 0% 98%;    /* White */
    --theme-lala-tertiary: 247 49% 58%;       /* #453DA0 - Medium Purple */
    
    /* La La Land Icon Colors */
    --theme-lala-icon-primary: 254 61% 48%;   /* Royal Purple for main icons */
    --theme-lala-icon-secondary: 45 58% 67%;  /* Golden Yellow for accent icons */
    --theme-lala-icon-muted: 217 40% 75%;     /* Light Blue for subtle icons */
    --theme-lala-icon-interactive: 247 49% 58%; /* Medium Purple for interactive icons */
    --theme-lala-icon-success: 217 33% 63%;   /* Light Blue for success states */
    --theme-lala-icon-warning: 45 58% 67%;    /* Golden Yellow for warnings */
    --theme-lala-icon-danger: 0 70% 60%;      /* Red for dangerous actions */
    
    /* Wes Anderson Theme Colors */
    --theme-wes-primary: 25 70% 35%;          /* Dark Warm Orange */
    --theme-wes-primary-dark: 25 75% 25%;     /* Darker Orange */
    --theme-wes-primary-light: 25 65% 45%;    /* Lighter Orange */
    --theme-wes-secondary: 210 35% 82%;       /* Dusty Blue */
    --theme-wes-secondary-dark: 210 30% 70%;  /* Darker Dusty Blue */
    --theme-wes-secondary-light: 210 40% 90%; /* Lighter Dusty Blue */
    --theme-wes-accent: 40 60% 80%;           /* Vintage Gold */
    --theme-wes-accent-dark: 40 70% 65%;      /* Darker Gold */
    --theme-wes-accent-light: 40 50% 90%;     /* Lighter Gold */
    --theme-wes-neutral: 150 30% 25%;         /* Forest Green */
    --theme-wes-neutral-light: 150 20% 35%;   /* Lighter Forest */
    --theme-wes-surface: 120 25% 92%;         /* Pastel Green */
    --theme-wes-surface-bright: 0 0% 100%;    /* Pure White */
    --theme-wes-tertiary: 333 30% 93%;        /* Soft Pink */
    

    
    /* Wes Anderson Icon Colors */
    --theme-wes-icon-primary: 25 70% 35%;     /* Dark Warm Orange for main icons */
    --theme-wes-icon-secondary: 40 60% 80%;   /* Vintage Gold for accent icons */
    --theme-wes-icon-muted: 210 35% 82%;      /* Dusty Blue for subtle icons */
    --theme-wes-icon-interactive: 333 30% 93%; /* Soft Pink for interactive icons */
    --theme-wes-icon-success: 150 30% 25%;    /* Forest Green for success states */
    --theme-wes-icon-warning: 40 60% 80%;     /* Vintage Gold for warnings */
    --theme-wes-icon-danger: 0 70% 60%;       /* Red for dangerous actions */
    
    /* Cat Lounging Theme Colors - Refined & Sophisticated */
    --theme-cat-primary: 180 35% 45%;         /* Muted Teal - sophisticated primary */
    --theme-cat-primary-dark: 180 40% 35%;    /* Deeper Teal */
    --theme-cat-primary-light: 180 30% 55%;   /* Lighter Teal */
    --theme-cat-secondary: 91 25% 45%;        /* Refined Sage Green */
    --theme-cat-secondary-dark: 91 30% 35%;   /* Deeper Sage */
    --theme-cat-secondary-light: 91 20% 55%;  /* Softer Sage */
    --theme-cat-accent: 35 45% 60%;           /* Warm Terracotta - much more muted */
    --theme-cat-accent-dark: 35 50% 50%;      /* Deeper Terracotta */
    --theme-cat-accent-light: 35 40% 70%;     /* Softer Terracotta */
    --theme-cat-neutral: 25 30% 25%;          /* Warm Dark Brown - grounded neutral */
    --theme-cat-neutral-light: 25 25% 35%;    /* Lighter Warm Brown */
    --theme-cat-surface: 45 25% 88%;          /* Warm Cream - much softer */
    --theme-cat-surface-bright: 45 15% 96%;   /* Very Soft Cream */
    --theme-cat-tertiary: 40 30% 75%;         /* Soft Peach - very muted */
    
    /* Cat Lounging Icon Colors - Refined & Harmonious */
    --theme-cat-icon-primary: 180 35% 45%;    /* Muted Teal for main icons */
    --theme-cat-icon-secondary: 35 45% 60%;   /* Warm Terracotta for accent icons */
    --theme-cat-icon-muted: 91 20% 55%;       /* Soft Sage for subtle icons */
    --theme-cat-icon-interactive: 35 50% 50%; /* Deeper Terracotta for interactive icons */
    --theme-cat-icon-success: 91 25% 45%;     /* Refined Sage for success states */
    --theme-cat-icon-warning: 40 30% 75%;     /* Soft Peach for warnings */
    --theme-cat-icon-danger: 35 55% 45%;      /* Deeper Terracotta for dangerous actions */
    
    /* ========================================= */
    /* ACTIVE THEME SELECTION */
    /* To switch themes, change 'lala' to 'wes' in the variable names below */
    /* OR use the theme-switcher.ts utility for programmatic switching */
    /* ========================================= */
    
    /* Current active theme: Cat Lounging */
    /* To switch themes: change 'theme-cat-' to 'theme-lala-' or 'theme-wes-' */
    --color-primary: var(--theme-cat-primary);
    --color-primary-dark: var(--theme-cat-primary-dark);
    --color-primary-light: var(--theme-cat-primary-light);
    --color-secondary: var(--theme-cat-secondary);
    --color-secondary-dark: var(--theme-cat-secondary-dark);
    --color-secondary-light: var(--theme-cat-secondary-light);
    --color-accent: var(--theme-cat-accent);
    --color-accent-dark: var(--theme-cat-accent-dark);
    --color-accent-light: var(--theme-cat-accent-light);
    --color-neutral: var(--theme-cat-neutral);
    --color-neutral-light: var(--theme-cat-neutral-light);
    --color-surface: var(--theme-cat-surface);
    --color-surface-bright: var(--theme-cat-surface-bright);
    --color-tertiary: var(--theme-cat-tertiary);
    
    /* Active Icon Colors (mapped to current theme) */
    --icon-primary: var(--theme-cat-icon-primary);
    --icon-secondary: var(--theme-cat-icon-secondary);
    --icon-muted: var(--theme-cat-icon-muted);
    --icon-interactive: var(--theme-cat-icon-interactive);
    --icon-success: var(--theme-cat-icon-success);
    --icon-warning: var(--theme-cat-icon-warning);
    --icon-danger: var(--theme-cat-icon-danger);
    
    /* ========================================= */
    /* SEMANTIC COLOR VARIABLES */
    /* These use the active theme colors above */
    /* ========================================= */
    
    --background: var(--color-surface);
    --foreground: var(--color-neutral);

    --card: var(--color-surface-bright);
    --card-foreground: var(--color-neutral);

    --popover: var(--color-surface-bright);
    --popover-foreground: var(--color-neutral);

    --primary: var(--color-primary);
    --primary-foreground: var(--color-surface-bright);

    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-neutral);

    --muted: var(--color-secondary-light);
    --muted-foreground: var(--color-secondary-dark);

    --accent: var(--color-accent);
    --accent-foreground: var(--color-neutral);

    --destructive: 0 70% 60%;
    --destructive-foreground: var(--color-surface-bright);

    --border: var(--color-secondary-light);
    --input: var(--color-surface-bright);
    --ring: var(--color-primary);

    --radius: 0.75rem;

    --sidebar-background: var(--color-tertiary);
    --sidebar-foreground: var(--color-surface-bright);
    --sidebar-primary: var(--color-accent);
    --sidebar-primary-foreground: var(--color-neutral);
    --sidebar-accent: var(--color-accent);
    --sidebar-accent-foreground: var(--color-neutral);
    --sidebar-border: var(--color-primary-dark);
    --sidebar-ring: var(--color-accent);
  }

  .dark {
    /* Dark mode uses inverted theme colors */
    --background: var(--color-neutral);
    --foreground: var(--color-surface);
    --card: var(--color-neutral-light);
    --card-foreground: var(--color-surface);
    --popover: var(--color-neutral-light);
    --popover-foreground: var(--color-surface);
    --primary: var(--color-accent);
    --primary-foreground: var(--color-neutral);
    --secondary: var(--color-primary-dark);
    --secondary-foreground: var(--color-surface);
    --muted: var(--color-secondary-dark);
    --muted-foreground: var(--color-secondary-light);
    --accent: var(--color-tertiary);
    --accent-foreground: var(--color-surface-bright);
    --border: var(--color-primary-light);
    --input: var(--color-neutral-light);
    --ring: var(--color-accent);
    --sidebar-background: var(--color-neutral-light);
    --sidebar-foreground: var(--color-surface);
    --sidebar-primary: var(--color-accent);
    --sidebar-primary-foreground: var(--color-neutral);
    --sidebar-accent: var(--color-tertiary);
    --sidebar-accent-foreground: var(--color-surface-bright);
    --sidebar-border: var(--color-primary-dark);
    --sidebar-ring: var(--color-accent);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-cocogoose font-light antialiased;
    font-family: 'Cocogoose', 'CocogooseNumbers', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: 
      /* Theme-adaptive dreamy gradient */
      linear-gradient(135deg, 
        hsl(var(--color-surface)) 0%,
        hsl(var(--color-secondary-light) / 0.3) 25%,
        hsl(var(--color-tertiary) / 0.2) 50%,
        hsl(var(--color-accent) / 0.2) 75%,
        hsl(var(--color-surface)) 100%
      ),
      /* Subtle star field effect */
      radial-gradient(circle at 15% 25%, hsl(var(--color-secondary) / 0.1) 0%, transparent 30%),
      radial-gradient(circle at 85% 15%, hsl(var(--color-tertiary) / 0.1) 0%, transparent 25%),
      radial-gradient(circle at 75% 85%, hsl(var(--color-accent) / 0.1) 0%, transparent 35%),
      /* Subtle texture */
      radial-gradient(circle at 1px 1px, rgba(255,255,255,0.08) 1px, transparent 0);
    background-size: 100% 100%, 80% 80%, 70% 70%, 90% 90%, 15px 15px;
    background-attachment: fixed, fixed, fixed, fixed, scroll;
    letter-spacing: 0.015em;
    position: relative;
  }

  /* Theme-adaptive starlight overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      linear-gradient(45deg, transparent 98%, hsl(var(--color-accent) / 0.05) 100%),
      linear-gradient(-45deg, transparent 98%, hsl(var(--color-secondary) / 0.03) 100%);
    background-size: 4px 4px;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.6;
    animation: dreamyShimmer 3s ease-in-out infinite;
  }

  /* Theme-adaptive spotlight effect */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      radial-gradient(ellipse at 30% 20%, hsl(var(--color-accent) / 0.03) 0%, transparent 40%),
      radial-gradient(ellipse at 70% 80%, hsl(var(--color-tertiary) / 0.02) 0%, transparent 50%);
    pointer-events: none;
    z-index: 999;
    opacity: 0.8;
    animation: gentleSpotlight 6s ease-in-out infinite alternate;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--theme-font-family, 'Cocogoose', 'Inter', sans-serif);
    font-weight: var(--theme-heading-weight, 350);
    letter-spacing: 0.02em;
    position: relative;
  }
  
  body {
    font-family: var(--theme-font-family, 'Cocogoose', 'Inter', sans-serif) !important;
    font-weight: var(--theme-body-weight, 350) !important;
  }
  
  /* ========================================= */
  /* WES ANDERSON THEME SPECIFIC STYLING */
  /* ========================================= */
  
  /* Wes Anderson Theme Body Styling */
  body.wes-anderson-theme {
    @apply font-['Inter',sans-serif] antialiased;
    background-image: 
      radial-gradient(circle at 20% 20%, hsl(333 30% 93%) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, hsl(48 85% 88%) 0%, transparent 50%),
      radial-gradient(circle at 40% 60%, hsl(145 35% 85%) 0%, transparent 50%),
      /* Vintage film grain */
      radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0);
    background-size: 100% 100%, 100% 100%, 100% 100%, 20px 20px;
    background-attachment: fixed, fixed, fixed, scroll;
    letter-spacing: 0.015em;
    position: relative;
  }

  /* Vintage film overlay for Wes Anderson theme */
  body.wes-anderson-theme::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      linear-gradient(90deg, transparent 98%, rgba(255,255,255,0.03) 100%),
      linear-gradient(0deg, transparent 98%, rgba(255,255,255,0.03) 100%);
    background-size: 3px 3px;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.4;
    animation: filmGrain 0.5s infinite;
  }

  /* Vintage scratches effect for Wes Anderson theme */
  body.wes-anderson-theme::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(90deg, transparent 95%, rgba(0,0,0,0.02) 95%, rgba(0,0,0,0.02) 97%, transparent 97%),
      linear-gradient(0deg, transparent 96%, rgba(0,0,0,0.015) 96%, rgba(0,0,0,0.015) 98%, transparent 98%);
    background-size: 100px 1px, 1px 150px;
    pointer-events: none;
    z-index: 999;
    opacity: 0.6;
    animation: vintageScratches 8s infinite linear;
  }
  
  /* Typography for Wes Anderson theme - handled by theme variables now */
  body.wes-anderson-theme {
    /* Additional Wes Anderson specific typography styles can go here if needed */
  }

  /* Force numbers to use system fonts since Cocogoose trial doesn't include them */
  .font-cocogoose {
    font-family: 'Cocogoose', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  }

  /* Override for any element containing numbers - force system font for digits */
  [class*="font-cocogoose"] {
    font-variant-numeric: tabular-nums;
  }

  /* Specific CSS to force numbers to use fallback fonts */
  .font-cocogoose::before,
  .font-cocogoose::after,
  .font-cocogoose {
    unicode-bidi: isolate;
  }

  /* Emergency fallback: Use Inter for any text containing numbers */
  .force-numbers {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  }

  /* Theme-adaptive shadows */
  .shadow-theme {
    box-shadow: 
      0 10px 25px -5px hsl(var(--primary) / 0.15),
      0 4px 6px -2px hsl(var(--primary) / 0.08),
      inset 0 1px 0 hsl(var(--accent) / 0.3),
      0 0 0 1px hsl(var(--color-accent) / 0.1);
  }

  .shadow-theme-hover {
    box-shadow: 
      0 20px 40px -10px hsl(var(--primary) / 0.2),
      0 8px 12px -4px hsl(var(--primary) / 0.15),
      inset 0 1px 0 hsl(var(--accent) / 0.4),
      0 0 0 2px hsl(var(--color-accent) / 0.2),
      0 0 30px hsl(var(--color-tertiary) / 0.1);
  }

  /* Legacy aliases for backward compatibility */
  .shadow-lala { @apply shadow-theme; }
  .shadow-lala-hover { @apply shadow-theme-hover; }

  /* ========================================= */
  /* THEME-ADAPTIVE ICON COLORS */
  /* ========================================= */
  
  /* Primary icon colors - for main navigation, important actions */
  .icon-primary {
    color: hsl(var(--icon-primary));
  }
  
  .icon-primary svg {
    fill: hsl(var(--icon-primary));
    stroke: hsl(var(--icon-primary));
  }
  
  /* Secondary icon colors - for accent elements, highlights */
  .icon-secondary {
    color: hsl(var(--icon-secondary));
  }
  
  .icon-secondary svg {
    fill: hsl(var(--icon-secondary));
    stroke: hsl(var(--icon-secondary));
  }
  
  /* Muted icon colors - for subtle, background icons */
  .icon-muted {
    color: hsl(var(--icon-muted));
  }
  
  .icon-muted svg {
    fill: hsl(var(--icon-muted));
    stroke: hsl(var(--icon-muted));
  }
  
  /* Interactive icon colors - for buttons, clickable elements */
  .icon-interactive {
    color: hsl(var(--icon-interactive));
    transition: color 0.2s ease, transform 0.2s ease;
  }
  
  .icon-interactive:hover {
    color: hsl(var(--icon-interactive) / 0.8);
    transform: scale(1.1);
  }
  
  .icon-interactive svg {
    fill: hsl(var(--icon-interactive));
    stroke: hsl(var(--icon-interactive));
    transition: fill 0.2s ease, stroke 0.2s ease;
  }
  
  .icon-interactive:hover svg {
    fill: hsl(var(--icon-interactive) / 0.8);
    stroke: hsl(var(--icon-interactive) / 0.8);
  }
  
  /* Success state icons - for completed actions, positive feedback */
  .icon-success {
    color: hsl(var(--icon-success));
  }
  
  .icon-success svg {
    fill: hsl(var(--icon-success));
    stroke: hsl(var(--icon-success));
  }
  
  /* Warning state icons - for cautionary messages */
  .icon-warning {
    color: hsl(var(--icon-warning));
  }
  
  .icon-warning svg {
    fill: hsl(var(--icon-warning));
    stroke: hsl(var(--icon-warning));
  }
  
  /* Danger state icons - for destructive actions, errors */
  .icon-danger {
    color: hsl(var(--icon-danger));
  }
  
  .icon-danger svg {
    fill: hsl(var(--icon-danger));
    stroke: hsl(var(--icon-danger));
  }
  
  /* Utility classes for icon sizing with theme colors */
  .icon-sm { width: 1rem; height: 1rem; }
  .icon-md { width: 1.5rem; height: 1.5rem; }
  .icon-lg { width: 2rem; height: 2rem; }
  .icon-xl { width: 2.5rem; height: 2.5rem; }

  /* ========================================= */
  /* SELECTIVE ICON COLOR OVERRIDES */
  /* ========================================= */
  
  /* Only override icons that explicitly use theme classes */
  .icon-theme-primary {
    color: hsl(var(--icon-primary)) !important;
  }
  
  .icon-theme-secondary {
    color: hsl(var(--icon-secondary)) !important;
  }
  
  /* Keep default white/inherit behavior for most icons */
  .text-white {
    color: white !important;
  }
  
  /* Preserve existing icon colors by default */
  svg {
    color: inherit;
  }

  /* ========================================= */
  /* THEME-ADAPTIVE GRADIENTS */
  /* ========================================= */
  
  /* Primary gradient for collapsed form buttons */
  .gradient-primary-collapsed {
    background: linear-gradient(to right, 
      hsl(var(--color-primary) / 0.6), 
      hsl(var(--color-tertiary) / 0.6), 
      hsl(var(--color-accent) / 0.6)
    );
    border: 1px solid hsl(var(--color-primary) / 0.8);
  }
  
  .gradient-primary-collapsed:hover {
    background: linear-gradient(to right, 
      hsl(var(--color-primary) / 0.7), 
      hsl(var(--color-tertiary) / 0.7), 
      hsl(var(--color-accent) / 0.7)
    );
  }
  
  /* Subtle gradient for expanded form buttons */
  .gradient-primary-expanded {
    background: linear-gradient(to right, 
      hsl(var(--color-secondary) / 0.2), 
      hsl(var(--color-tertiary) / 0.2), 
      hsl(var(--color-accent) / 0.2)
    );
    border: 1px solid hsl(var(--color-primary) / 0.4);
  }
  
  .gradient-primary-expanded:hover {
    background: linear-gradient(to right, 
      hsl(var(--color-secondary) / 0.3), 
      hsl(var(--color-tertiary) / 0.3), 
      hsl(var(--color-accent) / 0.3)
    );
  }
  
  /* Theme-adaptive sparkle color */
  .sparkle-accent {
    color: hsl(var(--color-accent)) !important;
  }

  /* ========================================= */
  /* DYNAMIC THEME-ADAPTIVE UTILITY CLASSES */
  /* ========================================= */
  
  /* Background colors */
  .bg-theme-primary { background-color: hsl(var(--color-primary)); }
  .bg-theme-secondary { background-color: hsl(var(--color-secondary)); }
  .bg-theme-accent { background-color: hsl(var(--color-accent)); }
  .bg-theme-surface { background-color: hsl(var(--color-surface)); }
  .bg-theme-tertiary { background-color: hsl(var(--color-tertiary)); }
  .bg-theme-neutral { background-color: hsl(var(--color-neutral)); }
  
  /* Background colors with opacity */
  .bg-theme-primary\/10 { background-color: hsl(var(--color-primary) / 0.1); }
  .bg-theme-primary\/20 { background-color: hsl(var(--color-primary) / 0.2); }
  .bg-theme-secondary\/10 { background-color: hsl(var(--color-secondary) / 0.1); }
  .bg-theme-secondary\/20 { background-color: hsl(var(--color-secondary) / 0.2); }
  .bg-theme-accent\/10 { background-color: hsl(var(--color-accent) / 0.1); }
  .bg-theme-accent\/20 { background-color: hsl(var(--color-accent) / 0.2); }
  .bg-theme-tertiary\/10 { background-color: hsl(var(--color-tertiary) / 0.1); }
  .bg-theme-tertiary\/20 { background-color: hsl(var(--color-tertiary) / 0.2); }
  
  /* Text colors */
  .text-theme-primary { color: hsl(var(--color-primary)); }
  .text-theme-secondary { color: hsl(var(--color-secondary)); }
  .text-theme-accent { color: hsl(var(--color-accent)); }
  .text-theme-surface { color: hsl(var(--color-surface)); }
  .text-theme-tertiary { color: hsl(var(--color-tertiary)); }
  .text-theme-neutral { color: hsl(var(--color-neutral)); }
  
  /* Border colors */
  .border-theme-primary { border-color: hsl(var(--color-primary)); }
  .border-theme-secondary { border-color: hsl(var(--color-secondary)); }
  .border-theme-accent { border-color: hsl(var(--color-accent)); }
  .border-theme-tertiary { border-color: hsl(var(--color-tertiary)); }
  
  /* Gradient utilities */
  .from-theme-primary { --tw-gradient-from: hsl(var(--color-primary)) var(--tw-gradient-from-position); }
  .from-theme-secondary { --tw-gradient-from: hsl(var(--color-secondary)) var(--tw-gradient-from-position); }
  .from-theme-accent { --tw-gradient-from: hsl(var(--color-accent)) var(--tw-gradient-from-position); }
  .from-theme-surface { --tw-gradient-from: hsl(var(--color-surface)) var(--tw-gradient-from-position); }
  .from-theme-tertiary { --tw-gradient-from: hsl(var(--color-tertiary)) var(--tw-gradient-from-position); }
  
  .to-theme-primary { --tw-gradient-to: hsl(var(--color-primary)) var(--tw-gradient-to-position); }
  .to-theme-secondary { --tw-gradient-to: hsl(var(--color-secondary)) var(--tw-gradient-to-position); }
  .to-theme-accent { --tw-gradient-to: hsl(var(--color-accent)) var(--tw-gradient-to-position); }
  .to-theme-surface { --tw-gradient-to: hsl(var(--color-surface)) var(--tw-gradient-to-position); }
  .to-theme-tertiary { --tw-gradient-to: hsl(var(--color-tertiary)) var(--tw-gradient-to-position); }

  /* ========================================= */
  /* THEME-ADAPTIVE TYPOGRAPHY UTILITIES */
  /* ========================================= */
  
  /* Font family utilities */
  .font-theme { font-family: var(--theme-font-family, 'Inter', sans-serif); }
  
  /* Font weight utilities - adapt to current theme */
  .font-theme-light { font-weight: var(--theme-light-weight, 300); }
  .font-theme-body { font-weight: var(--theme-body-weight, 400); }
  .font-theme-medium { font-weight: var(--theme-medium-weight, 500); }
  .font-theme-heading { font-weight: var(--theme-heading-weight, 600); }
  .font-theme-bold { font-weight: var(--theme-bold-weight, 700); }
  
  /* Override existing font-light classes to be theme-adaptive */
  .font-light {
    font-weight: var(--theme-light-weight, 300) !important;
  }
  
  .font-medium {
    font-weight: var(--theme-medium-weight, 400) !important;
  }
  
  .font-semibold {
    font-weight: var(--theme-heading-weight, 350) !important;
  }

  /* Wes Anderson signature elements */
  .wes-frame {
    @apply relative;
  }
  
  .wes-frame::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    border: 3px solid hsl(var(--primary) / 0.15);
    border-radius: inherit;
    box-shadow: 
      inset 0 0 0 2px hsl(var(--background)),
      inset 0 0 0 6px hsl(var(--accent) / 0.1),
      0 0 0 1px hsl(var(--primary) / 0.1);
  }

  .wes-ornate-frame {
    @apply relative;
  }

  .wes-ornate-frame::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    border: 4px solid hsl(var(--primary) / 0.2);
    border-radius: inherit;
    border-image: linear-gradient(45deg, 
      hsl(var(--lala-golden-yellow)), 
      hsl(var(--lala-royal-purple)), 
      hsl(var(--lala-light-blue)), 
      hsl(var(--lala-golden-yellow))
    ) 1;
    box-shadow: 
      inset 0 0 0 2px hsl(var(--background)),
      inset 0 0 0 8px hsl(var(--accent) / 0.08),
      inset 0 0 0 12px hsl(var(--lala-golden-yellow) / 0.05),
      0 2px 20px hsl(var(--primary) / 0.15);
  }

  .wes-ornate-frame::after {
    content: '';
    @apply absolute inset-2 pointer-events-none;
    background: 
      radial-gradient(circle at 10px 10px, hsl(var(--lala-golden-yellow) / 0.1) 1px, transparent 1px),
      radial-gradient(circle at 25px 25px, hsl(var(--lala-royal-purple) / 0.1) 1px, transparent 1px);
    background-size: 20px 20px, 50px 50px;
    border-radius: inherit;
  }

  .wes-symmetry {
    @apply flex flex-col items-center text-center;
  }

  .wes-card {
    @apply bg-white/90 backdrop-blur-sm border-2 border-primary/10 rounded-xl shadow-lg relative;
    box-shadow: 
      0 10px 25px -5px hsl(var(--primary) / 0.1),
      0 4px 6px -2px hsl(var(--primary) / 0.05),
      inset 0 1px 0 hsl(var(--accent) / 0.2),
      inset 0 0 0 1px hsl(var(--lala-golden-yellow) / 0.1);
  }

  .wes-card::before {
    content: '';
    @apply absolute inset-0 rounded-xl pointer-events-none;
    background: 
      linear-gradient(135deg, transparent 25%, hsl(var(--lala-medium-purple) / 0.03) 25%, hsl(var(--lala-medium-purple) / 0.03) 50%, transparent 50%),
      linear-gradient(45deg, transparent 25%, hsl(var(--lala-golden-yellow) / 0.02) 25%, hsl(var(--lala-golden-yellow) / 0.02) 50%);
    background-size: 30px 30px, 40px 40px;
  }

  .wes-vintage-card {
    @apply wes-card;
    background: 
      linear-gradient(135deg, hsl(var(--lala-cream)) 0%, hsl(var(--lala-medium-purple) / 0.3) 100%),
      radial-gradient(circle at top right, hsl(var(--lala-golden-yellow) / 0.2), transparent 50%),
      radial-gradient(circle at bottom left, hsl(var(--lala-light-blue) / 0.2), transparent 50%);
    position: relative;
  }

  .wes-vintage-card::after {
    content: '';
    @apply absolute inset-0 rounded-xl;
    background-image: 
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        hsl(var(--primary) / 0.03) 2px,
        hsl(var(--primary) / 0.03) 4px
      );
    pointer-events: none;
  }

  .wes-button {
    @apply relative overflow-hidden transition-all duration-300 ease-out;
    @apply bg-gradient-to-r from-primary to-primary/90;
    @apply hover:from-primary/90 hover:to-primary;
    @apply shadow-lg hover:shadow-xl;
    @apply border-2 border-primary/20;
    box-shadow: 
      0 4px 14px 0 hsl(var(--primary) / 0.15),
      inset 0 1px 0 hsl(var(--primary-foreground) / 0.2),
      inset 0 0 0 1px hsl(var(--lala-golden-yellow) / 0.3);
  }

  .wes-button::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent;
    @apply translate-x-[-100%] transition-transform duration-700;
  }

  .wes-button:hover::before {
    @apply translate-x-[100%];
  }

  .wes-button::after {
    content: '';
    @apply absolute inset-0;
    border-radius: inherit;
    background: 
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 1px,
        hsl(var(--primary-foreground) / 0.05) 1px,
        hsl(var(--primary-foreground) / 0.05) 2px
      );
    pointer-events: none;
  }

  .wes-grid {
    @apply grid gap-8;
    /* Perfect symmetrical spacing */
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  /* Enhanced vintage paper texture overlay */
  .wes-texture {
    position: relative;
  }
  
  .wes-texture::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      radial-gradient(circle at 1px 1px, hsl(var(--primary)) 1px, transparent 0),
      linear-gradient(45deg, transparent 48%, hsl(var(--primary) / 0.01) 49%, hsl(var(--primary) / 0.01) 51%, transparent 52%);
    background-size: 20px 20px, 8px 8px;
    opacity: 0.015;
    pointer-events: none;
    mix-blend-mode: multiply;
  }

  /* Enhanced geometric patterns */
  .wes-pattern {
    background-image: 
      linear-gradient(45deg, hsl(var(--accent)) 25%, transparent 25%),
      linear-gradient(-45deg, hsl(var(--accent)) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, hsl(var(--accent)) 75%),
      linear-gradient(-45deg, transparent 75%, hsl(var(--accent)) 75%),
      radial-gradient(circle at 50% 50%, hsl(var(--lala-golden-yellow) / 0.1) 2px, transparent 2px);
    background-size: 20px 20px, 20px 20px, 20px 20px, 20px 20px, 30px 30px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px, 15px 15px;
    opacity: 0.03;
  }

  .wes-chevron-pattern {
    background-image: 
      linear-gradient(45deg, transparent 40%, hsl(var(--lala-royal-purple) / 0.1) 40%, hsl(var(--lala-royal-purple) / 0.1) 60%, transparent 60%),
      linear-gradient(-45deg, transparent 40%, hsl(var(--lala-light-blue) / 0.1) 40%, hsl(var(--lala-light-blue) / 0.1) 60%, transparent 60%);
    background-size: 16px 16px;
    background-position: 0 0, 8px 8px;
  }

  .wes-diamond-pattern {
    background-image: 
      linear-gradient(45deg, hsl(var(--lala-golden-yellow) / 0.08) 25%, transparent 25%), 
      linear-gradient(-45deg, hsl(var(--lala-golden-yellow) / 0.08) 25%, transparent 25%), 
      linear-gradient(45deg, transparent 75%, hsl(var(--lala-golden-yellow) / 0.08) 75%), 
      linear-gradient(-45deg, transparent 75%, hsl(var(--lala-golden-yellow) / 0.08) 75%);
    background-size: 24px 24px;
    background-position: 0 0, 0 12px, 12px -12px, -12px 0px;
  }

  /* Art Deco inspired patterns */
  .wes-deco-pattern {
    background-image: 
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 8px,
        hsl(var(--lala-golden-yellow) / 0.06) 8px,
        hsl(var(--lala-golden-yellow) / 0.06) 16px,
        transparent 16px,
        transparent 24px,
        hsl(var(--lala-royal-purple) / 0.04) 24px,
        hsl(var(--lala-royal-purple) / 0.04) 32px
      );
  }

  /* Film strip effect */
  .wes-filmstrip {
    position: relative;
  }

  .wes-filmstrip::before {
    content: '';
    position: absolute;
    left: -20px;
    top: 0;
    bottom: 0;
    width: 16px;
    background: 
      linear-gradient(to bottom, 
        hsl(var(--primary)) 10px, 
        transparent 10px, 
        transparent 20px, 
        hsl(var(--primary)) 20px
      );
    background-size: 100% 30px;
    border-right: 2px solid hsl(var(--primary));
    opacity: 0.3;
  }

  .wes-filmstrip::after {
    content: '';
    position: absolute;
    right: -20px;
    top: 0;
    bottom: 0;
    width: 16px;
    background: 
      linear-gradient(to bottom, 
        hsl(var(--primary)) 10px, 
        transparent 10px, 
        transparent 20px, 
        hsl(var(--primary)) 20px
      );
    background-size: 100% 30px;
    border-left: 2px solid hsl(var(--primary));
    opacity: 0.3;
  }

  /* Vintage viewfinder effect */
  .wes-viewfinder {
    position: relative;
  }

  .wes-viewfinder::before {
    content: '';
    position: absolute;
    inset: 10px;
    border: 2px solid hsl(var(--primary) / 0.3);
    border-radius: 50%;
    box-shadow: 
      inset 0 0 0 4px hsl(var(--background)),
      inset 0 0 0 6px hsl(var(--primary) / 0.1),
      0 0 20px hsl(var(--primary) / 0.2);
    pointer-events: none;
  }

  .wes-viewfinder::after {
    content: '+';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    color: hsl(var(--primary) / 0.3);
    pointer-events: none;
    font-weight: 300;
  }

  /* Typewriter effect */
  .wes-typewriter {
    overflow: hidden;
    border-right: 2px solid hsl(var(--primary));
    white-space: nowrap;
    animation: typewriter 3s steps(40, end), blink-caret 0.75s step-end infinite;
  }

  /* Vintage badge */
  .wes-badge {
    position: relative;
    background: linear-gradient(45deg, hsl(var(--lala-golden-yellow)), hsl(var(--lala-gold-dark)));
    border: 3px solid hsl(var(--primary));
    border-radius: 50%;
    box-shadow: 
      0 0 0 4px hsl(var(--lala-golden-yellow) / 0.3),
      0 0 0 8px hsl(var(--background)),
      0 0 0 12px hsl(var(--primary) / 0.2),
      0 8px 16px hsl(var(--primary) / 0.3);
  }

  .wes-badge::before {
    content: '';
    position: absolute;
    inset: 6px;
    border-radius: 50%;
    background: 
      radial-gradient(circle at 30% 30%, hsl(var(--lala-cream) / 0.5), transparent 50%),
      conic-gradient(from 0deg, hsl(var(--lala-golden-yellow)), hsl(var(--lala-royal-purple)), hsl(var(--lala-light-blue)), hsl(var(--lala-golden-yellow)));
    opacity: 0.7;
  }

  /* Enhanced decorative corners */
  .wes-corners {
    position: relative;
  }

  .wes-corners::before,
  .wes-corners::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border: 3px solid hsl(var(--lala-golden-yellow));
  }

  .wes-corners::before {
    top: -3px;
    left: -3px;
    border-right: none;
    border-bottom: none;
  }

  .wes-corners::after {
    bottom: -3px;
    right: -3px;
    border-left: none;
    border-top: none;
  }

  /* Vintage polaroid effect */
  .wes-polaroid {
    background: white;
    padding: 12px 12px 40px 12px;
    box-shadow: 
      0 4px 8px hsl(var(--primary) / 0.1),
      0 0 0 1px hsl(var(--primary) / 0.05),
      inset 0 0 0 1px hsl(var(--primary) / 0.1);
    /* Removed default rotation to keep cards straight */
    transform: none;
    transition: transform 0.3s ease;
  }

  .wes-polaroid:hover {
    /* Subtle scale on hover without rotation */
    transform: scale(1.05);
  }

  .wes-polaroid::after {
    content: '';
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 2px;
    background: linear-gradient(to right, transparent, hsl(var(--primary) / 0.3), transparent);
  }
}

@layer base {
  /* Eliminate the 300 ms mobile tap-delay everywhere (still allows pinch-zoom) */
  body {
    touch-action: manipulation;
  }
}

@layer components {
  .wes-header {
    @apply wes-symmetry bg-white/80 backdrop-blur-md border-b-2 border-primary/10 relative;
    @apply shadow-sm;
    background: 
      linear-gradient(90deg, hsl(var(--lala-cream)) 0%, hsl(var(--lala-medium-purple) / 0.3) 50%, hsl(var(--lala-cream)) 100%),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 100px,
        hsl(var(--lala-golden-yellow) / 0.05) 100px,
        hsl(var(--lala-golden-yellow) / 0.05) 102px
      );
  }

  .wes-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
      hsl(var(--lala-golden-yellow)), 
      hsl(var(--lala-royal-purple)), 
      hsl(var(--lala-light-blue)), 
      hsl(var(--lala-golden-yellow)), 
      hsl(var(--lala-golden-yellow))
    );
  }

  .wes-nav-item {
    @apply relative px-6 py-3 font-light text-sm tracking-wider uppercase;
    @apply transition-all duration-300 ease-out;
    @apply hover:text-primary hover:bg-accent/30;
    position: relative;
  }

  .wes-nav-item::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, hsl(var(--lala-golden-yellow) / 0.2), transparent);
    transform: translate(-50%, -50%);
    transition: all 0.4s ease;
    border-radius: 50%;
  }

  .wes-nav-item:hover::before {
    width: 100%;
    height: 100%;
  }

  .wes-nav-item::after {
    content: '';
    @apply absolute bottom-0 left-1/2 w-0 h-0.5 bg-gradient-to-r from-wes-vintage-gold to-wes-coral;
    @apply transition-all duration-300 ease-out;
    transform: translateX(-50%);
  }

  .wes-nav-item:hover::after {
    @apply w-full;
  }

  .wes-tool-card {
    @apply wes-vintage-card wes-ornate-frame;
    @apply transition-all duration-500 ease-out cursor-pointer;
    @apply hover:shadow-2xl hover:border-primary/20;
    position: relative;
    overflow: hidden;
    background: white;
    padding: 12px;
    box-shadow: 
      0 4px 8px hsl(var(--primary) / 0.1),
      0 0 0 1px hsl(var(--primary) / 0.05),
      inset 0 0 0 1px hsl(var(--primary) / 0.1);
  }

  .wes-tool-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: 
      radial-gradient(circle at center, 
        hsl(var(--lala-golden-yellow) / 0.1) 0%, 
        transparent 50%
      );
    transform: scale(0);
    transition: transform 0.6s ease;
    border-radius: 50%;
    pointer-events: none;
  }

  .wes-tool-card:hover::before {
    transform: scale(1);
  }

  .wes-tool-card:hover {
    /* Reduced scale and removed translateY to prevent flicker */
    transform: scale(1.02);
  }

  .wes-modal {
    @apply wes-vintage-card wes-ornate-frame wes-texture max-w-2xl mx-auto;
    @apply animate-in fade-in-0 zoom-in-95 duration-300;
  }

  .wes-input {
    @apply bg-white/90 border-2 border-primary/20 rounded-lg relative;
    @apply focus:border-primary focus:ring-2 focus:ring-primary/20;
    @apply transition-all duration-200 ease-out;
    box-shadow: 
      inset 0 1px 3px hsl(var(--primary) / 0.1),
      0 0 0 1px hsl(var(--lala-golden-yellow) / 0.2);
  }

  .wes-input:focus {
    box-shadow: 
      inset 0 1px 3px hsl(var(--primary) / 0.1),
      0 0 0 1px hsl(var(--lala-golden-yellow) / 0.4),
      0 0 10px hsl(var(--primary) / 0.2);
  }

  .wes-select {
    @apply wes-input appearance-none bg-white/90;
    background-image: 
      linear-gradient(45deg, transparent 50%, hsl(var(--primary)) 50%),
      linear-gradient(135deg, hsl(var(--primary)) 50%, transparent 50%);
    background-position: 
      calc(100% - 15px) calc(1em + 2px),
      calc(100% - 10px) calc(1em + 2px);
    background-size: 5px 5px, 5px 5px;
    background-repeat: no-repeat;
  }

  /* Enhanced decorative elements */
  .wes-ornament {
    position: relative;
  }

  .wes-ornament::before {
    content: '❋';
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    color: hsl(var(--lala-golden-yellow));
    text-shadow: 0 0 10px hsl(var(--lala-golden-yellow) / 0.5);
  }

  .wes-divider {
    position: relative;
    text-align: center;
    margin: 2rem 0;
  }

  .wes-divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      hsl(var(--lala-golden-yellow) / 0.3) 20%,
      hsl(var(--lala-royal-purple) / 0.3) 50%,
      hsl(var(--lala-light-blue) / 0.3) 80%,
      transparent
    );
  }

  .wes-divider::after {
    content: '◆';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: hsl(var(--background));
    padding: 0 1rem;
    color: hsl(var(--lala-golden-yellow));
    font-size: 12px;
  }

  /* Vintage camera aperture effect */
  .wes-aperture {
    position: relative;
    border-radius: 50%;
    overflow: hidden;
  }

  .wes-aperture::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
      conic-gradient(from 0deg at 50% 50%,
        transparent 0deg,
        hsl(var(--primary) / 0.1) 45deg,
        transparent 90deg,
        hsl(var(--primary) / 0.1) 135deg,
        transparent 180deg,
        hsl(var(--primary) / 0.1) 225deg,
        transparent 270deg,
        hsl(var(--primary) / 0.1) 315deg,
        transparent 360deg
      );
    animation: rotate 20s linear infinite;
  }

  /* Vintage stamp effect */
  .wes-stamp {
    position: relative;
    border: 3px dashed hsl(var(--primary) / 0.4);
    background: hsl(var(--lala-cream));
    /* Keep stamps upright by default */
    transform: rotate(0deg);
  }

  .wes-stamp::before {
    content: '';
    position: absolute;
    inset: -8px;
    border: 2px solid hsl(var(--primary) / 0.2);
    background: 
      radial-gradient(circle at 4px 4px, hsl(var(--primary) / 0.3) 2px, transparent 2px);
    background-size: 8px 8px;
  }
}

@layer components {
  .sparkle-underline {
    position: relative;
    padding-bottom: 5px; /* Keeps text from getting too close to line */
  }

  /* Shared container for both underlines */
  .sparkle-underline::before,
  .sparkle-underline::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 2px;
    width: 100%;
    height: 2px;
    pointer-events: none;
    transition: opacity 0.4s ease-in-out;
  }

  /* Static, default underline */
  .sparkle-underline::after {
    background-image: repeating-linear-gradient(
      to right,
      hsl(var(--muted-foreground) / 0.5) 0 2px,
      transparent 2px 4px
    );
    background-size: 4px 1px;
    background-repeat: repeat-x;
    opacity: 1; /* Visible by default */
  }

  .sparkle-underline:hover::after {
    opacity: 0; /* Fade out on hover */
  }

  /* Animated, colorful underline */
  .sparkle-underline::before {
    background-image: linear-gradient(
      90deg,
      hsl(var(--wes-pink)),
      hsl(var(--wes-vintage-gold)),
      hsl(var(--wes-coral)),
      hsl(var(--wes-pink)) /* Loop back */
    );
    background-size: 200% 100%;
    opacity: 0; /* Hidden by default */
    animation: sparkleColorWave 3s linear infinite;
  }

  .sparkle-underline:hover::before {
    opacity: 1; /* Fade in on hover */
  }

  /* Enhance persistence for sparkle-underline when tooltip open */
  .sparkle-underline[data-state="open"]::before {
    opacity: 1 !important;
    animation: sparkleColorWave 3s linear infinite;
  }
  .sparkle-underline[data-state="open"]::after {
    opacity: 0 !important;
  }

  /* Keep colorful underline when tooltip is open (React state-based) */
  .sparkle-underline.tooltip-open::before {
    opacity: 1 !important;
    animation: sparkleColorWave 3s linear infinite;
  }
  
  .sparkle-underline.tooltip-open::after {
    opacity: 0 !important;
  }

  /* Additional fallback for tooltip hover states */
  .sparkle-underline:has(+ [data-state="open"])::before,
  .sparkle-underline[data-state="open"]:hover::before {
    opacity: 1 !important;
    animation: sparkleColorWave 3s linear infinite;
  }
  
  .sparkle-underline:has(+ [data-state="open"])::after,
  .sparkle-underline[data-state="open"]:hover::after {
    opacity: 0 !important;
  }
   
  /* Multicolour border for tooltips on hover */
  .tooltip-content:hover {
    border-image: linear-gradient(to right, hsl(var(--wes-pink)), hsl(var(--wes-vintage-gold)), hsl(var(--wes-coral))) 1;
    border-image-slice: 1;
    border-width: 2px;
  }
}

@keyframes sparkleColorWave {
  to {
    background-position: -200% 0;
  }
}

/* Clean, subtle color cycling with smooth loop back to start */
@keyframes reighColorCycle {
  0% { filter: hue-rotate(0deg) saturate(1.0) brightness(1.0); }      /* Original clean */
  20% { filter: hue-rotate(30deg) saturate(0.95) brightness(1.02); }  /* Clean shift toward gold */
  40% { filter: hue-rotate(60deg) saturate(1.05) brightness(0.98); }  /* Clean shift toward mint */
  60% { filter: hue-rotate(90deg) saturate(0.9) brightness(1.01); }   /* Clean shift toward coral */
  80% { filter: hue-rotate(60deg) saturate(0.95) brightness(0.99); }  /* Smooth return journey */
  100% { filter: hue-rotate(0deg) saturate(1.0) brightness(1.0); }    /* Back to original - smooth loop */
}

@keyframes dreamyShimmer {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

@keyframes gentleSpotlight {
  0% { 
    transform: translateX(0) translateY(0) scale(1); 
    opacity: 0.6;
  }
  50% { 
    transform: translateX(10px) translateY(-5px) scale(1.1); 
    opacity: 0.9;
  }
  100% { 
    transform: translateX(0) translateY(0) scale(1); 
    opacity: 0.6;
  }
}

@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: hsl(var(--primary)); }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes dreamyGlow {
  0%, 100% { 
    text-shadow: 
      0 0 8px hsl(var(--color-accent) / 0.6),
      0 0 15px hsl(var(--color-accent) / 0.4),
      0 0 25px hsl(var(--color-tertiary) / 0.2);
  }
  50% { 
    text-shadow: 
      0 0 15px hsl(var(--color-accent) / 0.9),
      0 0 25px hsl(var(--color-accent) / 0.6),
      0 0 35px hsl(var(--color-tertiary) / 0.4),
      0 0 45px hsl(var(--color-secondary) / 0.3);
  }
}

@keyframes parallaxFloat {
  0%, 100% { 
    transform: translateY(0px) translateX(0px) rotate(0deg); 
  }
  25% { 
    transform: translateY(-10px) translateX(5px) rotate(1deg); 
  }
  50% { 
    transform: translateY(-5px) translateX(-3px) rotate(-0.5deg); 
  }
  75% { 
    transform: translateY(-15px) translateX(8px) rotate(1.5deg); 
  }
}

@keyframes vintagePulse {
  0%, 100% { 
    opacity: 0.6;
    transform: scale(1);
  }
  50% { 
    opacity: 0.9;
    transform: scale(1.05);
  }
}

/* Animation for drag drop shrink fade */
@keyframes scaleFade {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(0.3); opacity: 0; }
}

/* Subtle flash animation for new tasks */
@keyframes flash {
  0% { border-color: rgb(45 212 191); opacity: 1; }
  20% { border-color: rgb(45 212 191); opacity: 0.7; }
  40% { border-color: rgb(45 212 191); opacity: 1; }
  60% { border-color: rgb(45 212 191); opacity: 0.8; }
  80% { border-color: rgb(45 212 191); opacity: 1; }
  90% { border-color: rgb(45 212 191); opacity: 0.5; }
  100% { border-color: rgb(113 113 122); opacity: 1; }
}

.animate-scale-fade {
  animation: scaleFade 0.3s forwards ease-out;
}

/* Utility: disable the sweeping highlight that .wes-button adds */
.no-sweep::before {
  display: none !important;
}

@keyframes subtleWiggle {
  0%, 100% {
    transform: rotate(-3deg);
  }
  25% {
    transform: rotate(3deg);
  }
  50% {
    transform: rotate(-3deg);
  }
  75% {
    transform: rotate(3deg);
  }
}

.animate-subtle-wiggle {
  animation: subtleWiggle 0.5s ease-in-out;
}

/* Custom animations for homepage side panes */
@keyframes spinLeftFade {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(-90deg);
  }
}

@keyframes spinRightFade {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(90deg);
  }
}

@keyframes spinLeftFadeReverse {
  0% {
    transform: rotate(-90deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

@keyframes spinRightFadeReverse {
  0% {
    transform: rotate(90deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

.animate-spin-left-fade {
  animation: spinLeftFade 0.6s ease-out forwards;
}

.animate-spin-right-fade {
  animation: spinRightFade 0.6s ease-out forwards;
}

.animate-spin-left-fade-reverse {
  animation: spinLeftFadeReverse 0.3s ease-out forwards;
}

.animate-spin-right-fade-reverse {
  animation: spinRightFadeReverse 0.3s ease-out forwards;
}

/* Custom utility overrides for tool selector page */
@layer utilities {
  .tool-selector-text-lg {
    font-size: 0.725rem;
    line-height: 1.75rem;
  }

  .tool-selector-py-3 {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
  }

  .tool-selector-py-8 {
    padding-top: 0rem;
    padding-bottom: 0rem;
  }

  /* Override Tailwind's py-8 class */
  .py-8 {
    padding-top: 0rem !important;
    padding-bottom: 0rem !important;
  }

  /* Content-responsive debugging info */
  /* CSS custom properties set by Layout.tsx for content area dimensions */
  /* --content-width: actual available content width in px */
  /* --content-height: actual available content height in px */
  /* --content-sm, --content-md, --content-lg, --content-xl, --content-2xl: 1 or 0 */
  
  /* Helper utilities for content-aware layouts */
  .content-responsive-debug {
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px;
    font-size: 12px;
    z-index: 10000;
    border-radius: 4px;
  }
  
  .content-responsive-debug::after {
    content: 'Content: ' var(--content-width) 'x' var(--content-height) ' | SM:' var(--content-sm, 0) ' LG:' var(--content-lg, 0);
  }
}

/* Timeline scrollbar always visible and styled */
.timeline-scroll {
  scrollbar-gutter: stable;
}

.timeline-scroll::-webkit-scrollbar {
  height: 10px;
}

.timeline-scroll::-webkit-scrollbar-track {
  background: hsla(var(--muted) / 0.4);
}

.timeline-scroll::-webkit-scrollbar-thumb {
  background: hsl(var(--primary));
  border-radius: 4px;
}

/* Ensure thumb stands out in dark mode */
.dark .timeline-scroll::-webkit-scrollbar-thumb {
  background: hsl(var(--primary-foreground));
}

/* Elegant background animations */
@keyframes gradientShift {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 0.8; }
}

@keyframes pulseSubtle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.4; }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes floatSlow {
  0%, 100% { 
    transform: translateY(0px) translateX(0px); 
    opacity: 0.8;
  }
  33% { 
    transform: translateY(-20px) translateX(10px); 
    opacity: 0.6;
  }
  66% { 
    transform: translateY(10px) translateX(-5px); 
    opacity: 0.9;
  }
}

@keyframes floatGentle {
  0%, 100% { 
    transform: translateY(0px) translateX(0px) scale(1); 
    opacity: 0.7;
  }
  25% { 
    transform: translateY(-15px) translateX(8px) scale(1.1); 
    opacity: 0.5;
  }
  50% { 
    transform: translateY(-8px) translateX(-3px) scale(0.9); 
    opacity: 0.8;
  }
  75% { 
    transform: translateY(5px) translateX(12px) scale(1.05); 
    opacity: 0.6;
  }
}

@keyframes rotateGentle {
  0%, 100% { 
    transform: rotate(0deg) scale(1); 
    opacity: 0.6;
  }
  25% { 
    transform: rotate(5deg) scale(1.1); 
    opacity: 0.4;
  }
  50% { 
    transform: rotate(-3deg) scale(0.95); 
    opacity: 0.7;
  }
  75% { 
    transform: rotate(8deg) scale(1.05); 
    opacity: 0.5;
  }
}

/* Animation utility classes */
.animate-gradient-shift {
  animation: gradientShift 12s ease-in-out infinite;
}

.animate-pulse-subtle {
  animation: pulseSubtle 8s ease-in-out infinite;
}

.animate-shimmer {
  background-size: 200% auto;
  animation: shimmer 3s linear infinite;
}

.animate-reigh-color-cycle {
  animation: reighColorCycle 20s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulseGlow 4s ease-in-out infinite;
}

.animate-pulse-breathe {
  animation: pulseBreath 3s ease-in-out infinite;
}

.animate-pulse-wave {
  animation: pulseWave 5s ease-in-out infinite;
}

.animate-float-slow {
  animation: floatSlow 20s ease-in-out infinite;
}

.animate-float-gentle {
  animation: floatGentle 15s ease-in-out infinite;
}

.animate-rotate-gentle {
  animation: rotateGentle 25s ease-in-out infinite;
}

/* Missing animations for GlobalHeader buttons */
@keyframes wrenchTurn {
  0%, 15% {
    transform: scale(1.1) rotate(0deg);
  }
  25%, 40% {
    transform: scale(1.1) rotate(-12deg);
  }
  50%, 65% {
    transform: scale(1.1) rotate(12deg);
  }
  75%, 90% {
    transform: scale(1.1) rotate(-8deg);
  }
  100% {
    transform: scale(1.1) rotate(0deg);
  }
}

@keyframes bubblePop {
  0%, 20% {
    transform: scale(1);
  }
  30% {
    transform: scale(1.2);
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(1.15);
  }
  85% {
    transform: scale(1.08);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes rotateSlow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes bounceGentle {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-6px);
  }
}

@keyframes sway {
  0%, 100% {
    transform: translateX(0) rotate(0deg);
  }
  33% {
    transform: translateX(2px) rotate(2deg);
  }
  66% {
    transform: translateX(-2px) rotate(-2deg);
  }
}

@keyframes paintbrushStroke {
  0%, 100% {
    transform: rotate(0deg);
  }
  20% {
    transform: rotate(-15deg);
  }
  40% {
    transform: rotate(10deg);
  }
  60% {
    transform: rotate(-8deg);
  }
  80% {
    transform: rotate(5deg);
  }
}

.animate-wrench-turn {
  animation: wrenchTurn 0.6s ease-in-out !important;
}

.animate-bubble-pop {
  animation: bubblePop 0.5s ease-in-out !important;
}

.animate-rotate-slow {
  animation: rotateSlow 10s linear infinite;
}

.animate-bounce-gentle {
  animation: bounceGentle 2s ease-in-out infinite;
}

.animate-vintage-pulse {
  animation: vintagePulse 3s ease-in-out infinite;
}

.animate-sway {
  animation: sway 4s ease-in-out infinite;
}

.animate-paintbrush-stroke {
  animation: paintbrushStroke 0.8s ease-in-out;
}

/* Paintbrush wiggle animation */
@keyframes paintbrushWiggle {
  0%, 100% {
    transform: rotate(0deg);
    transform-origin: bottom center;
  }
  10% {
    transform: rotate(-10deg);
    transform-origin: bottom center;
  }
  20% {
    transform: rotate(10deg);
    transform-origin: bottom center;
  }
  30% {
    transform: rotate(-8deg);
    transform-origin: bottom center;
  }
  40% {
    transform: rotate(8deg);
    transform-origin: bottom center;
  }
  50% {
    transform: rotate(-6deg);
    transform-origin: bottom center;
  }
  60% {
    transform: rotate(6deg);
    transform-origin: bottom center;
  }
  70% {
    transform: rotate(-4deg);
    transform-origin: bottom center;
  }
  80% {
    transform: rotate(4deg);
    transform-origin: bottom center;
  }
  90% {
    transform: rotate(-2deg);
    transform-origin: bottom center;
  }
}

.animate-paintbrush-wiggle {
  animation: paintbrushWiggle 0.8s ease-in-out infinite;
  transform-origin: bottom center;
}

/* Paint particle sequential animation */
@keyframes paintParticleSequential {
  0%, 15% {
    opacity: 0;
    transform: scale(1);
  }
  20% {
    opacity: 1;
    transform: scale(1);
  }
  40% {
    opacity: 1;
    transform: scale(2);
  }
  60% {
    opacity: 0;
    transform: scale(3.5);
  }
  100% {
    opacity: 0;
    transform: scale(3.5);
  }
}

.animate-paint-particle-1 {
  animation: paintParticleSequential 1.8s ease-out infinite;
  animation-delay: 0s;
}

.animate-paint-particle-2 {
  animation: paintParticleSequential 1.8s ease-out infinite;
  animation-delay: 0.3s;
}

.animate-paint-particle-3 {
  animation: paintParticleSequential 1.8s ease-out infinite;
  animation-delay: 0.6s;
}

/* Group-hover variants for custom animations */
.group:hover .group-hover\:animate-wrench-turn {
  animation: wrenchTurn 1.2s ease-in-out infinite;
}

.group:hover .group-hover\:animate-bubble-pop {
  animation: bubblePop 0.8s ease-in-out infinite;
}

/* Icon hover animations */
@keyframes brainPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

@keyframes giftingMotion {
  0%, 100% {
    transform: translateX(1px);
  }
  50% {
    transform: translateX(-1px);
  }
}

.group:hover .animate-brain-pulse {
  animation: brainPulse 1.5s ease-in-out infinite;
}

.group:hover .animate-gifting-motion {
  animation: giftingMotion 2s ease-in-out infinite;
}

/* Decorative line animations */
@keyframes pulseGlow {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  50% {
    opacity: 0.6;
    filter: brightness(1.02);
  }
}

@keyframes pulseBreath {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  33% {
    opacity: 0.8;
    filter: brightness(1.1);
  }
  66% {
    opacity: 0.9;
    filter: brightness(0.95);
  }
}

@keyframes pulseWave {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  25% {
    opacity: 0.8;
    filter: brightness(1.05);
  }
  50% {
    opacity: 0.5;
    filter: brightness(1.1);
  }
  75% {
    opacity: 0.8;
    filter: brightness(1.05);
  }
}

@keyframes swayX {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-1.5px); }
}

@keyframes swayY {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-1.5px); }
}

.animate-sway-x {
  animation: swayX 0.6s ease-in-out infinite;
}

.animate-sway-y {
  animation: swayY 0.6s ease-in-out infinite;
}

/* Group-hover variant for sway-x animation */
.group:hover .group-hover\:animate-sway-x {
  animation: swayX 0.8s ease-in-out infinite;
}

.group:hover .group-hover\:animate-sway-y {
  animation: swayY 0.8s ease-in-out infinite;
}

/* Hide scrollbar but keep scroll functionality */
.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* --- Palette icon hover fill ------------------------------------------- */
.palette-icon circle {
  /* paint wells start empty */
  fill: transparent;
  stroke: currentColor;
  transition: fill 800ms ease, stroke 800ms ease;
}
.palette-icon path {
  /* outer border starts with current color */
  stroke: currentColor;
  transition: stroke 1s ease;
}
.group:hover .palette-icon path {
  animation:
    palette-entry 1s ease forwards,
    palette-border-cycle 32s ease-in-out 1s infinite;
}
@keyframes palette-entry {
  0% { stroke: currentColor; }
  100% { stroke: rgba(253, 226, 228, 0.6); } /* pink */
}
@keyframes palette-border-cycle {
  0% { stroke: rgba(253, 226, 228, 0.6); }
  25% { stroke: rgba(228, 230, 255, 0.6); }
  50% { stroke: rgba(208, 244, 222, 0.6); }
  75% { stroke: rgba(250, 221, 151, 0.6); }
  100% { stroke: rgba(253, 226, 228, 0.6); }
}
@keyframes soul-grow-animation {
  0% { color: hsl(var(--lala-light-blue)); }
  25% { color: hsl(var(--lala-medium-purple)); }
  50% { color: hsl(var(--lala-golden-yellow)); }
  75% { color: hsl(var(--lala-royal-purple)); }
  100% { color: hsl(var(--lala-light-blue)); }
}
.animated-soul-grow {
  animation: soul-grow-animation 8s ease-in-out infinite;
  font-style: normal;
  font-weight: 600;
}
/* Slow white overlay */
.palette-wrapper {
  position: relative;
  overflow: hidden;
  transition: none; /* override any fast transitions */
}
.palette-wrapper:hover {
  border-color: rgba(253, 226, 228, 0.6);
  animation: palette-border-wrapper-cycle 32s ease-in-out 1s infinite;
}
@keyframes palette-border-wrapper-cycle {
  0% { border-color: rgba(253, 226, 228, 0.6); }
  25% { border-color: rgba(228, 230, 255, 0.6); }
  50% { border-color: rgba(208, 244, 222, 0.6); }
  75% { border-color: rgba(250, 221, 151, 0.6); }
  100% { border-color: rgba(253, 226, 228, 0.6); }
}

/* Synchronized color animations for PaletteIcon connecting line and quote box */
.animate-connecting-line-hover {
  animation: connecting-line-hover 32s ease-in-out 1s infinite;
}

@keyframes connecting-line-hover {
  0%, 100% { 
    filter: hue-rotate(0deg) saturate(1.2); 
    opacity: 0.9;
  }
  25% { 
    filter: hue-rotate(-20deg) saturate(0.8); 
    opacity: 0.85;
  }
  50% { 
    filter: hue-rotate(40deg) saturate(0.9); 
    opacity: 0.9;
  }
  75% { 
    filter: hue-rotate(-40deg) saturate(1.1); 
    opacity: 0.85;
  }
}

@keyframes quote-border-color-cycle {
  0% { border-color: rgba(253, 226, 228, 0.6); }
  25% { border-color: rgba(228, 230, 255, 0.6); }
  50% { border-color: rgba(208, 244, 222, 0.6); }
  75% { border-color: rgba(250, 221, 151, 0.6); }
  100% { border-color: rgba(253, 226, 228, 0.6); }
}
.palette-wrapper::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.7));
  opacity: 0;
  transition: opacity 3000ms ease;
  pointer-events: none;
  border-radius: inherit;
  z-index: -1;
}
.palette-wrapper:hover::before {
  opacity: 1;
}

/* ========================================= */
/* WES ANDERSON THEME ANIMATIONS */
/* ========================================= */

@keyframes filmGrain {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.6; }
}

@keyframes vintageScratches {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-1px, 1px); }
  50% { transform: translate(1px, -1px); }
  75% { transform: translate(-1px, -1px); }
  100% { transform: translate(0, 0); }
}
.palette-wrapper > * {
  position: relative;
  z-index: 1;
}
.group:hover .palette-icon circle:nth-of-type(1) { fill: #fde2e4; stroke: #fde2e4; transition-delay: 600ms; } /* pastel pink */
.group:hover .palette-icon circle:nth-of-type(2) { fill: #e4e6ff; stroke: #e4e6ff; transition-delay: 800ms; } /* pastel lavender */
.group:hover .palette-icon circle:nth-of-type(3) { fill: #d0f4de; stroke: #d0f4de; transition-delay: 400ms; } /* pastel mint */
.group:hover .palette-icon circle:nth-of-type(4) { fill: #fadd97; stroke: #fadd97; transition-delay: 200ms; } /* darker yellow */
/* ----------------------------------------------------------------------- */

.dehovering .palette-icon path {
  animation: none !important;
  transition: stroke 10s ease;
  stroke: currentColor;
}
.dehovering {
  border-color: hsl(var(--lala-golden-yellow) / 0.2) !important;
  animation: none !important;
  transition: border-color 10s ease;
}

@layer utilities {
  /* Override Tailwind's min-h-screen to account for mobile dynamic viewport height */
  .min-h-screen {
    /* Fallback for older browsers */
    min-height: 100vh;
    /* Use dynamic viewport unit where supported to avoid address-bar shift issues */
    min-height: 100dvh;
  }

  /* Hide fullscreen and picture-in-picture buttons on videos */
  .hide-video-controls::-webkit-media-controls-fullscreen-button {
    display: none !important;
  }
  
  .hide-video-controls::-webkit-media-controls-picture-in-picture-button {
    display: none !important;
  }

  /* For Firefox */
  .hide-video-controls::-moz-media-controls-fullscreen-button {
    display: none !important;
  }
}

/* Custom override for modal inputs */
[data-radix-dialog-content] input,
[data-radix-dialog-content] textarea,
[data-radix-dialog-content] [data-radix-select-trigger] {
  --input: #faf9f7;
  --ring: var(--theme-cat-secondary);
  border-color: #f5f3f0;
}

.dark [data-radix-dialog-content] input,
.dark [data-radix-dialog-content] textarea,
.dark [data-radix-dialog-content] [data-radix-select-trigger] {
  --input: #4a453f;
  --ring: var(--theme-cat-secondary);
  border-color: #3d3831;
}

/* Special styling for main prompt text fields in PromptInputRow */
[data-radix-dialog-content] textarea[id^="fullPrompt-"] {
  --input: #f0f8ff !important;
  --ring: var(--theme-cat-secondary) !important;
  border-color: #e6f3ff !important;
  background-color: #f0f8ff !important;
}

.dark [data-radix-dialog-content] textarea[id^="fullPrompt-"] {
  --input: #2a3441 !important;
  --ring: var(--theme-cat-secondary) !important;
  border-color: #1e2834 !important;
  background-color: #2a3441 !important;
}

